let isIOS=checkIOS(),isFirefox="undefined"!=typeof InstallTrigger;const preloader=document.querySelector(".preloader");let preloaderHiddenTimeOut=0;preloader&&(preloaderHiddenTimeOut=1400,enableScroll(),disableScroll(),setTimeout((()=>{preloader.classList.add("loaded"),setTimeout((()=>{enableScroll()}),600)}),1400));const header=document.querySelector(".header"),menuMobileBtn=document.querySelector(".menu-mobile__btn"),menuOpenBtn=document.querySelector(".menu-open-btn"),menuCloseBtn=document.querySelector(".menu-close-btn"),mobMenu=document.querySelector(".header__mob-wrapper"),modal=document.querySelectorAll(".modal"),successModal=document.querySelector(".success-mod"),errorModal=document.querySelector(".error-mod"),dropdown=document.querySelectorAll(".dropdown");let animSpd=400,bp={largeDesktop:1460.98,desktop:1200.98,laptop:1030.98,tablet:767.98,phone:600.98};function scrollPos(){return window.scrollY||window.pageYOffset||document.documentElement.scrollTop}function checkIOS(){let e=navigator.platform,t=navigator.userAgent;return/(iPhone|iPod|iPad)/i.test(e)||"MacIntel"===e&&navigator.maxTouchPoints>1&&!window.MSStream||/iPad|iPhone|iPod/.test(t)&&!window.MSStream}function enableScroll(){if(!document.querySelector(".modal.open")&&(document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll"),document.documentElement.classList.remove("no-scroll"),isIOS)){document.body.style.position="",document.body.style.top="",document.body.style.width="";let e=document.body.dataset.scrollY;window.scrollTo(0,parseInt(e||"0"))}}function disableScroll(){if(!document.querySelector(".modal.open")){let e=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0;if(document.querySelector(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.body.classList.add("no-scroll"),document.documentElement.classList.add("no-scroll"),isIOS){let e=window.scrollY;document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${e}px`,document.body.dataset.scrollY=e}}}function smoothDrop(e,t,o=!1){let r=o||500;if(t.style.overflow="hidden",t.style.transition=`height ${r}ms ease`,t.style["-webkit-transition"]=`height ${r}ms ease`,e.classList.contains("active")){e.parentNode.classList.remove("active");let o=t.clientHeight+"px";t.style.height=o,setTimeout((function(){t.style.height="0",setTimeout((()=>{t.style.display="none",t.style.height=null,e.classList.remove("active")}),r)}),0)}else{e.parentNode.classList.add("active"),t.style.display="block";let o=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=o,setTimeout((()=>{t.style.height=null,e.classList.add("active")}),r)}),0)}}function tabSwitch(e,t){e.forEach(((o,r)=>{o.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-selected",!1)})),o.classList.add("active"),o.setAttribute("aria-selected",!0),t.forEach((e=>{e.dataset.block===o.dataset.tab?e.classList.contains("active")||(e.classList.add("active"),e.style.opacity="0",setTimeout((()=>{e.style.opacity="1"}),0)):e.classList.remove("active")}))}))}))}const customScroll=document.querySelectorAll(".custom-scroll");isFirefox&&(document.documentElement.style.scrollbarColor="#231F20 transparent"),isFirefox&&customScroll&&customScroll.forEach((e=>{e.style.scrollbarWidth="thin",e.style.scrollbarColor="#231F20 transparent"}));const anchorLinks=document.querySelectorAll(".js-anchor");anchorLinks.length&&anchorLinks.forEach((e=>{e.addEventListener("click",(t=>{let o=e.getAttribute("href").indexOf("#");const r=e.getAttribute("href").substring(o);let n=document.querySelector(r);if(n){t.preventDefault();let e=n.getBoundingClientRect().top<0?n.getBoundingClientRect().top-header.clientHeight-10:n.getBoundingClientRect().top-10;menuCloseBtn&&mobMenu&&mobMenu.classList.contains("show")?(menuCloseBtn.click(),setTimeout((()=>{window.scrollTo({top:scrollPos()+e,behavior:"smooth"})}),300)):window.scrollTo({top:scrollPos()+e,behavior:"smooth"})}}))}));let lastScroll=scrollPos();window.addEventListener("scroll",(()=>{scrollPos()>1?(header.classList.add("scroll"),header.classList.contains("header--main")&&header.classList.remove("header--light"),scrollPos()>lastScroll&&scrollPos()>150&&!header.classList.contains("unshow")?header.classList.add("unshow"):scrollPos()<lastScroll&&header.classList.contains("unshow")&&header.classList.remove("unshow")):(header.classList.remove("scroll"),header.classList.remove("unshow"),header.classList.contains("header--main")&&header.classList.add("header--light")),lastScroll=scrollPos()}));const switchBlock=document.querySelectorAll(".switch-block");function openModal(e){let t=document.querySelector(".modal.open");disableScroll(),t&&t.classList.remove("open"),e.classList.add("open")}function closeModal(e){e.querySelector("video")&&e.querySelectorAll("video").forEach((e=>e.pause())),e.classList.remove("open"),setTimeout((()=>{enableScroll()}),animSpd)}function modalShowBtns(){const e=document.querySelectorAll(".mod-open-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");openModal(document.getElementById(o))}))}))}function modalUnshowBtns(){const e=document.querySelectorAll(".mod-close-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");closeModal(document.getElementById(o))}))}))}function openDropdown(e){e.classList.add("open"),e.querySelector(".dropdown__header").setAttribute("aria-expanded",!0),e.querySelectorAll("label input").forEach((t=>{t.addEventListener("change",(t=>{setActiveOption(e)}))})),document.addEventListener("click",(function t(o){e.contains(o.target)||(closeDropdown(e),document.removeEventListener("click",t))}))}function setActiveOption(e){if(e.querySelector(".dropdown__header").classList.add("checked"),e.classList.contains("radio-select")){let t=e.querySelector("input:checked").nextElementSibling.innerHTML;e.querySelector(".dropdown__header span").innerHTML=t,closeDropdown(e)}}function closeDropdown(e){e.classList.remove("open"),e.querySelector(".dropdown__header").setAttribute("aria-expanded",!1)}function setSuccessTxt(e=!1,t=!1){successModal.querySelector(".modal__top .h2").innerHTML=e||"Спасибо!<br>Мы получили вашу заявку.",t&&(successModal.querySelector(".modal__top-txt").innerHTML=t)}function setErrorTxt(e=!1,t=!1){errorModal.querySelector(".modal__top .h2").innerHTML=e||"Что-то пошло не так",t&&(errorModal.querySelector(".modal__top-txt").innerHTML=t)}function openSuccessMod(e=!1,t=!1){setSuccessTxt(e,t),openModal(successModal)}function openErrorMod(e=!1,t=!1){setErrorTxt(e,t),openModal(errorModal)}function formReset(e){e.querySelectorAll(".item-form").length>0&&e.querySelectorAll(".item-form").forEach((e=>e.classList.remove("error"))),e.querySelectorAll("[data-error]").length>0&&e.querySelectorAll("[data-error]").forEach((e=>e.textContent="")),e.querySelectorAll("input").forEach((e=>{["hidden","checkbox","radio"].includes(e.type)||(e.value=""),["checkbox","radio"].includes(e.type)&&!e.classList.contains("required")&&(e.checked=!1,e.setAttribute("aria-checked","false"))})),e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector(".file-form__items")&&(e.querySelector(".file-form__items").innerHTML="")}switchBlock&&switchBlock.forEach((e=>{tabSwitch(e.querySelectorAll("[data-tab]"),e.querySelectorAll("[data-block]"))})),modal&&modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)||closeModal(e)})),e.querySelectorAll(".modal__close").forEach((t=>{t.addEventListener("click",(()=>{closeModal(e)}))}))})),modalShowBtns(),modalUnshowBtns(),dropdown&&dropdown.forEach((e=>{e.querySelector(".dropdown__header").addEventListener("click",(()=>{e.classList.contains("open")?closeDropdown(e):openDropdown(e)}))}));const form=document.querySelectorAll(".form");form.length&&form.forEach((e=>{e.addEventListener("input",(e=>{const t=e.target.closest(".item-form");t&&t.classList.remove("error")}));let t=e.querySelectorAll("input");t.length&&t.forEach((t=>{t.addEventListener("change",(()=>{if("checkbox"===t.type)t.parentNode.setAttribute("aria-checked",t.checked?"true":"false");else if("radio"===t.type){let o=t.getAttribute("name");e.querySelectorAll(`input[name='${o}']`).forEach((e=>{e.parentNode.setAttribute("aria-checked","false"),t.parentNode.setAttribute("aria-checked","true")}))}}))}))}));const inp=document.querySelectorAll("input[type=tel]");inp&&inp.forEach((e=>{Inputmask({mask:"+7 999 999-99-99"}).mask(e)}));let allFileTypes=[{extension:".png",mimeType:"image/png"},{extension:[".jpg",".jpeg"],mimeType:"image/jpeg"},{extension:".gif",mimeType:"image/gif"},{extension:".bmp",mimeType:"image/bmp"},{extension:".txt",mimeType:"text/plain"},{extension:".rtf",mimeType:"application/rtf"},{extension:[".ppt",".pot",".pps",".ppa"],mimeType:"application/vnd.ms-powerpoint"},{extension:".pptx",mimeType:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{extension:".odp",mimeType:"application/vnd.oasis.opendocument.presentation"},{extension:".ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{extension:".doc",mimeType:"application/msword"},{extension:".docx",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{extension:".pdf",mimeType:"application/pdf"},{extension:[".xls",".xlt",".xla",".xlsb",".xlsm",".xltx",".xltm"],mimeType:"application/vnd.ms-excel"},{extension:".xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{extension:".odt",mimeType:"application/vnd.oasis.opendocument.text"}];function addFile(e,t){let o=t.querySelector("input").getAttribute("data-max-size"),r=t.querySelector("input").getAttribute("accept"),n=[];if(r){let e=r.split(",").map((e=>e.trim().toLowerCase())).filter((e=>""!==e));allFileTypes.forEach((t=>{if(Array.isArray(t.extension)){for(const o of t.extension)if(e.includes(o)){n.push(t.mimeType);break}}else"string"==typeof t.extension&&e.includes(t.extension)&&n.push(t.mimeType)})),r=e.map((e=>e.replace(/^\./,""))).join(", ")}for(let l=0;l<e.length;l++){let i=e[l];if(o&&i.size>1024*o*1024)return t.querySelector("input").value="",t.classList.add("error"),t.querySelectorAll(".file-form__item").forEach((e=>e.remove())),void(t.querySelector("[data-error]").textContent=`Файл должен быть менее ${o} МБ`);if(r&&n.length&&!n.includes(i.type))return t.querySelector("input").value="",t.classList.add("error"),t.querySelectorAll(".file-form__item").forEach((e=>e.remove())),void(t.querySelector("[data-error]").textContent=`Разрешённые форматы: ${r}`);{t.classList.remove("error"),t.querySelector("[data-error]").textContent="";let e=new FileReader;e.readAsDataURL(i),e.onload=()=>{t.querySelector(".file-form__items").insertAdjacentHTML("afterbegin",`<div class="file-form__item">\n                        <div class="file-form__name">${i.name}</div>\n                        <button type="button" class="btn-cross file-form__del"></button>\n                    </div>`)},e.onerror=()=>{console.log(e.error)}}}}document.querySelector(".file-form")&&document.querySelectorAll(".file-form").forEach((e=>{e.querySelector("input").addEventListener("change",(t=>{e.querySelectorAll(".file-form__item").forEach((e=>e.remove())),addFile(t.target.files,e)})),e.addEventListener("click",(t=>{e.querySelectorAll(".file-form__del").forEach(((o,r)=>{if(o.contains(t.target)){const t=new DataTransfer,n=e.querySelector("input"),{files:l}=n;for(let e=0;e<l.length;e++){let o=l[e];e!==r&&t.items.add(o)}n.files=t.files,setTimeout((()=>{o.parentNode.remove()}),0)}}))})),e.addEventListener("dragenter",(e=>{e.preventDefault()})),e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("dragleave",(e=>{e.preventDefault()})),e.addEventListener("drop",(function(t){t.preventDefault();const o=new DataTransfer;o.items.add(t.dataTransfer.files[0]);let r=Array.from(o.files);e.querySelector("input").files=o.files,e.querySelectorAll(".file-form__item").forEach((e=>e.remove())),addFile(r,e)}))}));const accordion=document.querySelectorAll(".accordion");accordion.length&&accordion.forEach((e=>{e.querySelector(".accordion__header").addEventListener("click",(()=>{e.classList.contains("no-close")||e.parentNode.parentNode.querySelectorAll(".accordion").forEach((t=>{if(t.querySelector(".accordion__header").classList.contains("active")&&(smoothDrop(t.querySelector(".accordion__header"),t.querySelector(".accordion__body")),t.getBoundingClientRect().top<0)){let o=scrollPos()+e.getBoundingClientRect().top-t.querySelector(".accordion__body").clientHeight-header.clientHeight-10;window.scrollTo(0,o)}})),smoothDrop(e.querySelector(".accordion__header"),e.querySelector(".accordion__body"))}))}));const swiper4=document.querySelectorAll(".swiper-4");swiper4.length&&swiper4.forEach((e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:1.19,spaceBetween:10,observer:!0,observeParents:!0,watchSlidesProgress:!0,pagination:{el:e.querySelector(".swiper-pagination"),type:"bullets",clickable:!0},breakpoints:{1460.98:{slidesPerView:4,spaceBetween:20},1030.98:{slidesPerView:3,spaceBetween:20},767.98:{slidesPerView:3,spaceBetween:10},600.98:{slidesPerView:2,spaceBetween:10},480.98:{slidesPerView:1.6,spaceBetween:10}},speed:800})}));const swiper2=document.querySelectorAll(".swiper-2");swiper2.length&&swiper2.forEach((e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:1.19,spaceBetween:10,observer:!0,observeParents:!0,watchSlidesProgress:!0,pagination:{el:e.querySelector(".swiper-pagination"),type:"bullets",clickable:!0},breakpoints:{1030.98:{slidesPerView:2,spaceBetween:20},600.98:{slidesPerView:2,spaceBetween:10},480.98:{slidesPerView:1.6,spaceBetween:10}},speed:800})}));const projectSwiper=document.querySelector(".project-p__swiper");if(projectSwiper){let e,t;function initProjectSwiper(){window.innerWidth>=bp.tablet&&!t?(t=!0,e=new Swiper(projectSwiper.querySelector(".swiper"),{slidesPerView:"auto",observer:!0,observeParents:!0,watchSlidesProgress:!0,navigation:{prevEl:projectSwiper.querySelector(".nav-btn--prev"),nextEl:projectSwiper.querySelector(".nav-btn--next")},speed:800})):window.innerWidth<bp.tablet&&t&&(t=!1,e.destroy())}initProjectSwiper(),window.addEventListener("resize",initProjectSwiper),projectSwiper.querySelectorAll(".swiper-slide img").forEach((e=>{e.complete?e.closest(".swiper-slide").classList.add("loaded"):e.addEventListener("load",(function(){e.closest(".swiper-slide").classList.add("loaded")}))}))}const teamSwiper=document.querySelector(".team .swiper");if(teamSwiper){let o,r;function initTeamSwiper(){window.innerWidth>=bp.largeDesktop&&!r?(r=!0,o=new Swiper(teamSwiper,{slidesPerView:4,spaceBetween:20,observer:!0,observeParents:!0,watchSlidesProgress:!0,speed:800})):window.innerWidth<bp.largeDesktop&&r&&(r=!1,o.destroy())}initTeamSwiper(),window.addEventListener("resize",initTeamSwiper)}function lazyLoad(){const e=document.querySelectorAll(".lazy-img img[loading=lazy]");e.length&&e.forEach((e=>{const t=e.closest(".lazy-img");e.complete?(t.classList.add("loaded"),e.removeAttribute("loading")):e.addEventListener("load",(function(){t.classList.add("loaded"),e.removeAttribute("loading")}))}))}function animate(){document.querySelectorAll("[data-animation]").forEach((async e=>{const t=e.getBoundingClientRect().top,o=Math.abs(window.innerHeight-.1*e.offsetHeight);if(t-(o>100?o:100)<0){const t=e.getAttribute("data-animation");preloader&&!preloader.classList.contains("loaded")&&await new Promise((e=>setTimeout(e,preloaderHiddenTimeOut))),e.classList.add(t),e.removeAttribute("data-animation")}}))}lazyLoad(),animate(),window.addEventListener("load",animate),window.addEventListener("orientationchange",animate),window.addEventListener("scroll",animate),menuOpenBtn&&menuCloseBtn&&mobMenu&&(menuOpenBtn.addEventListener("click",(()=>{mobMenu.classList.add("show"),disableScroll()})),menuCloseBtn.addEventListener("click",(()=>{mobMenu.classList.remove("show"),enableScroll()})),window.addEventListener("resize",(()=>{window.innerWidth>bp.desktop&&mobMenu.classList.contains("show")&&menuCloseBtn.click()})));const pageUp=document.querySelector(".page-up");pageUp&&pageUp.addEventListener("click",(()=>window.scrollTo({top:0,behavior:"smooth"})));